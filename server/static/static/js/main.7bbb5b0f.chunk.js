(this.webpackJsonplabeler=this.webpackJsonplabeler||[]).push([[0],{59:function(t,e,n){t.exports=n(74)},64:function(t,e,n){},74:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(7),l=n.n(o),c=(n(64),n(65),n(23)),i=n(16),s=n(17),u=n(19),p=n(18),d=n(20),f=n(78),h=["C1A7FF","C2CBFF","C7FCBA","FDFEC9","FFD8B6","FEBCC2"],m=function(t){return t?"#"+h[function(t){for(var e,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}(t)%6]:"none"},x=n(76),E=n(84),b=n(77),g=function(t){function e(){var t;return Object(i.a)(this,e),(t=Object(u.a)(this,Object(p.a)(e).call(this))).state={highlighted:!1,showTooltip:!1},t.onClickFn=function(){t.setState({highlighted:!0,showTooltip:!t.state.showTooltip})},t.dismiss=function(){var e=t.props,n=e.textId,a=e.wordIndex;(0,e.classifyAsNothingWordAction)(n,a),t.closeTooltipFn()},t.closeTooltipFn=function(){t.setState({showTooltip:!1})},t.classifyWord=function(e,n,a){t.closeTooltipFn(),t.props.classifyWordAction(e,n,a)},t.generateButton=function(e){var n=e.key,a=e.value,o=t.props,l=o.textId,c=o.wordIndex;return r.a.createElement(x.a,{className:"tooltip-button",onClick:function(){return t.classifyWord(l,c,n)}},a)},t.inputRef=null,t}return Object(d.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this,e=this.props.options;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{ref:function(e){t.inputRef=e},onClick:this.onClickFn,style:{background:m(this.props.wordState)}},this.props.word),r.a.createElement(E.a,{rootClose:!0,onHide:this.closeTooltipFn,target:this.inputRef,show:this.state.showTooltip,placement:"top"},r.a.createElement(b.a,{className:"customTooltip"},r.a.createElement(x.a,{variant:"outline-secondary",onClick:this.dismiss},"Dismiss"),r.a.createElement("div",null,e.map(this.generateButton)))))}}]),e}(r.a.Component),y="FETCH_TEXT_SAMPLES",v="CLASSIFY_WORD",T="FETCH_TEXT_SAMPLES_SUCCESS",w="TEXT_SAMPLES_UPDATED",S=function(t,e){return fetch("https://labeler-app.herokuapp.com/textSamples/".concat(t,"/"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({result:e})}).then((function(t){return t.json()})).then((function(t){if(t.error)throw t.error;return t})).catch((function(t){console.log(t)}))};function O(t){var e=t.text.split(" ").length;return(t.result||[]).length!==e&&(t.result=new Array(e).fill(null)),t}var C={classifyWord:function(t,e,n,a){return{type:v,textId:t,wordIndex:e,classification:n}},fetchTextSamples:function(){return function(t){return fetch("https://labeler-app.herokuapp.com/textSamples/").then((function(t){return t.json()})).then((function(e){if(e.error)throw e.error;return t(function(t){var e=t.map(O);return{type:T,textSamples:e}}(e)),e})).catch((function(t){console.log(t)}))}},updateTextSample:function(t,e){return console.log("REEE",e),S(t,e),{type:w,textId:t}}};function j(t,e,n){var a=n.texts.find((function(t){return t.id===e}));if(a)return a.result[t]}var A=Object(c.b)((function(t,e){return{wordState:j(e.wordIndex,e.textId,t)}}),(function(t){return{classifyWordAction:function(e,n,a){return t(C.classifyWord(e,n,a,t))},classifyAsNothingWordAction:function(e,n){return t(C.classifyWord(e,n,null))}}}))(g),F=function(t){function e(){var t,n;Object(i.a)(this,e);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(u.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(o)))).componentDidUpdate=function(){var t=n.props,e=t.hasChanged,a=t.updateTextSample,r=t.textId,o=t.result;console.log("UPDATE"),e&&a(r,o)},n.getTextSampleComponent=function(){var t,e=n.props,a=e.type,o=e.text,l=e.textId;if("LABELER_GOOD_BAD"===a)return t=[{value:"Good word",key:"GOOD"},{value:"Bad word",key:"BAD"}],r.a.createElement(k,{text:o,options:t,textId:l})},n}return Object(d.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.getTextSampleComponent();return r.a.createElement(f.a,null," ",t," ")}}]),e}(r.a.Component),k=function(t){function e(){var t,n;Object(i.a)(this,e);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(u.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(o)))).buildWord=function(t,e){var a=n.props,o=a.textId,l=a.options,c=0===e?"":" ";return r.a.createElement(r.a.Fragment,null,c,r.a.createElement(A,{options:l,textId:o,wordIndex:e,word:t}))},n}return Object(d.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("span",{className:"text"},this.props.text.split(" ").map((function(e,n){return t.buildWord(e,n)})))}}]),e}(r.a.Component),I=F,B=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){(0,this.props.fetchTextSamples)()}},{key:"render",value:function(){var t=this.props,e=t.texts,n=t.updateTextSample;return e?r.a.createElement(r.a.Fragment,null,e.map((function(t,e){return r.a.createElement(I,{key:e,textId:t.id,text:t.text,type:t.type,hasChanged:t.changed,result:t.result,updateTextSample:n})}))):r.a.createElement(r.a.Fragment,null,"No texts loaded")}}]),e}(r.a.Component),D=Object(c.b)((function(t){return{texts:t.texts}}),(function(t){return{fetchTextSamples:function(){return t(C.fetchTextSamples())},updateTextSample:function(e,n){return t(C.updateTextSample(e,n))}}}))(B),W=n(54),_=n(13),N=n(83),L=n(82),R=n(79),P=n(80),H=n(81);function U(){return r.a.createElement(R.a,{fluid:!0},r.a.createElement(P.a,null,r.a.createElement(H.a,{lg:8},r.a.createElement(D,null)),r.a.createElement(H.a,{lg:4},r.a.createElement(f.a,null,r.a.createElement("h5",null,"Use this app to label words inside texts. Click on one word and select a label."),r.a.createElement("p",null,'For this example you can tag words as "Good word" "Bad Word". Results will be saved automatically to the database. To explore the raw results, got to:',r.a.createElement("a",{href:"https://labeler-app.herokuapp.com/textSamples/"},"https://labeler-app.herokuapp.com/textSamples/"))))))}var G=function(){return r.a.createElement(W.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(N.a,{bg:"light",className:"nav-bar"},r.a.createElement(N.a.Brand,null,"Labeler App"),r.a.createElement(L.a.Link,{href:"/"},"Home")),r.a.createElement(_.c,null,r.a.createElement(_.a,{path:"/"},r.a.createElement(U,null)))))},M=n(25),J=n(35),X=function(t,e){return e.map((function(e){return e.id===t&&(e.changed=!1),e}))},Y=function(t,e){switch(e.type){case v:return Object(J.a)({},t,{texts:(n=e.textId,a=e.wordIndex,r=e.classification,o=t.texts,o.map((function(t){return t.id===n&&(t.changed=!0,t.result[a]=r),t})))});case T:return Object(J.a)({},t,{texts:e.textSamples});case w:return Object(J.a)({},t,{texts:X(e.textId,t.texts)});case y:return{rotating:e.payload};default:return t}var n,a,r,o},q=n(58),z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rotating:!0};return Object(M.c)(Y,t,Object(M.a)(q.a))}();window.store=z;var K=document.getElementById("root");l.a.render(r.a.createElement(c.a,{store:z},r.a.createElement(G,null)),K)}},[[59,1,2]]]);
//# sourceMappingURL=main.7bbb5b0f.chunk.js.map